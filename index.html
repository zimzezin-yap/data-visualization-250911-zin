
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>세계 학생 교육 성취도 (UNESCO)</title>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', Arial, sans-serif; margin: 0; }
  header { padding: 16px 20px; border-bottom: 1px solid #eee; }
  .container { padding: 16px 20px; }
  .chart-wrap { position: relative; }
  svg { width: 100%; height: 70vh; }
  .axis path, .axis line { stroke: #bbb; }
  .line { fill: none; stroke-width: 1.5px; opacity: 0.6; transition: opacity .2s, stroke-width .2s; }
  .line:hover { cursor: pointer; }
  .country-label-big {
    position: absolute;
    left: 50%;
    top: 10px;
    transform: translateX(-50%);
    font-size: clamp(16px, 5vw, 48px);
    font-weight: 800;
    letter-spacing: 0.5px;
    pointer-events: none;
    opacity: 0;
    transition: opacity .15s;
    text-shadow: 0 1px 2px rgba(0,0,0,0.06);
  }
  .legend { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; margin-top: 8px; color: #555; font-size: 12px; }
  .muted { opacity: 0.15; }
  .controls { display: flex; gap: 10px; align-items: center; margin-bottom: 8px; }
  button { padding: 6px 10px; border-radius: 8px; border: 1px solid #ddd; background: #fafafa; }
  button:hover { background: #f2f2f2; }
</style>
</head>
<body>
  <header>
    <h1 style="margin:0; font-size:clamp(18px, 3vw, 28px)">세계 학생 교육 성취도 — 연도별 추이 (선형 그래프)</h1>
    <div style="color:#666; font-size:14px;">출처: UNESCO dataset (수학·초등 지표, MATH.PRIMARY)</div>
  </header>
  <div class="container">
    <div class="controls">
      <button id="showAll">전체 보기</button>
      <button id="clearAll">모두 흐리게</button>
      <input id="search" type="search" placeholder="국가명 검색…" style="flex:1; padding:6px 10px; border:1px solid #ddd; border-radius:8px"/>
    </div>
    <div class="chart-wrap">
      <div class="country-label-big" id="bigLabel"></div>
      <svg id="chart" role="img" aria-label="세계 학생 교육 성취도 선형 그래프"></svg>
    </div>
    <div class="legend" id="legend"></div>
  </div>

<script>
const data = [{"country": "Albania", "series": [{"year": 2019, "value": 61.75175642116626}, {"year": 2021, "value": 92.11940863897352}, {"year": 2023, "value": 68.0}]}, {"country": "Algeria", "series": [{"year": 2007, "value": 14.0670110851713}]}, {"country": "Argentina", "series": [{"year": 2006, "value": 48.59999999999999}, {"year": 2006, "value": 44.7}, {"year": 2013, "value": 20.7}, {"year": 2013, "value": 32.5}, {"year": 2019, "value": 13.1}, {"year": 2019, "value": 31.9}]}, {"country": "Armenia", "series": [{"year": 2003, "value": 42.74586308379887}, {"year": 2007, "value": 59.9958138702788}, {"year": 2011, "value": 40.91932605084993}, {"year": 2015, "value": 54.56382307948197}, {"year": 2019, "value": 64.34171420315991}, {"year": 2023, "value": 72.0}]}, {"country": "Australia", "series": [{"year": 2003, "value": 64.8630530260808}, {"year": 2007, "value": 60.78500978459682}, {"year": 2011, "value": 62.94128635218912}, {"year": 2015, "value": 64.43291417144172}, {"year": 2019, "value": 67.95150231578201}, {"year": 2023, "value": 64.0}]}, {"country": "Austria", "series": [{"year": 2006, "value": 97.62325849488383}, {"year": 2007, "value": 68.8972658429082}, {"year": 2011, "value": 70.43404850706776}, {"year": 2011, "value": 97.10411063768905}, {"year": 2016, "value": 97.58574004293224}, {"year": 2019, "value": 83.55019014998616}, {"year": 2021, "value": 95.92334586122121}]}, {"country": "Azerbaijan", "series": [{"year": 2011, "value": 46.41993943742233}, {"year": 2011, "value": 81.85956821529548}, {"year": 2016, "value": 80.78632810865258}, {"year": 2019, "value": 71.74673648850059}, {"year": 2021, "value": 67.43262085804564}, {"year": 2023, "value": 61.0}]}, {"country": "Bahrain", "series": [{"year": 2011, "value": 33.8327657063392}, {"year": 2015, "value": 39.9338284933619}, {"year": 2016, "value": 69.36833511412861}, {"year": 2019, "value": 54.17750655915576}, {"year": 2021, "value": 71.18333292398408}, {"year": 2023, "value": 45.0}]}, {"country": "Belgium", "series": [{"year": 2003, "value": 90.01700919388914}, {"year": 2006, "value": 99.2168414983667}, {"year": 2011, "value": 89.23521796143706}, {"year": 2015, "value": 87.87937141497613}, {"year": 2016, "value": 97.41729460942544}, {"year": 2019, "value": 80.14717124423431}, {"year": 2021, "value": 94.3109595542579}, {"year": 2023, "value": 73.0}]}, {"country": "Belize", "series": [{"year": 2001, "value": 25.21795462511478}]}, {"country": "Benin", "series": [{"year": 2014, "value": 10.8}, {"year": 2014, "value": 22.7}, {"year": 2019, "value": 19.1}, {"year": 2019, "value": 45.5}]}, {"country": "Bolivia, Plurinational State of", "series": [{"year": 2017, "value": 7.7}, {"year": 2017, "value": 15.2}]}, {"country": "Bosnia and Herzegovina", "series": [{"year": 2019, "value": 39.55166801770545}, {"year": 2023, "value": 38.0}]}, {"country": "Botswana", "series": [{"year": 2006, "value": 16.5}, {"year": 2006, "value": 56.7}, {"year": 2013, "value": 36.6}, {"year": 2013, "value": 68.5}]}, {"country": "Brazil", "series": [{"year": 2006, "value": 40.45}, {"year": 2006, "value": 49.93}, {"year": 2013, "value": 16.6}, {"year": 2013, "value": 36.8}, {"year": 2019, "value": 28.8}, {"year": 2019, "value": 43.5}]}, {"country": "Bulgaria", "series": [{"year": 2001, "value": 95.04929657077342}, {"year": 2006, "value": 94.76472219545448}, {"year": 2011, "value": 93.04843864458603}, {"year": 2015, "value": 75.1170647254078}, {"year": 2016, "value": 94.78671479043906}, {"year": 2019, "value": 70.8579967692463}, {"year": 2021, "value": 92.87986674664508}, {"year": 2023, "value": 74.0}]}, {"country": "Burkina Faso", "series": [{"year": 2014, "value": 21.9}, {"year": 2014, "value": 21.4}, {"year": 2019, "value": 25.0}, {"year": 2019, "value": 33.0}]}, {"country": "Burundi", "series": [{"year": 2014, "value": 39.9}, {"year": 2014, "value": 7.4}, {"year": 2019, "value": 18.0}, {"year": 2019, "value": 4.5}]}, {"country": "Cambodia", "series": [{"year": 2019, "value": 18.0}, {"year": 2019, "value": 11.0}]}, {"country": "Cameroon", "series": [{"year": 2014, "value": 11.8}, {"year": 2014, "value": 24.1}, {"year": 2019, "value": 11.1}, {"year": 2019, "value": 30.2}]}, {"country": "Canada", "series": [{"year": 2001, "value": 96.90735785861048}, {"year": 2011, "value": 97.75077833597067}, {"year": 2015, "value": 69.4359086926293}, {"year": 2016, "value": 95.74039121832625}, {"year": 2019, "value": 68.7205556070746}, {"year": 2021, "value": 98.77729086815624}, {"year": 2023, "value": 65.0}]}, {"country": "Chad", "series": [{"year": 2014, "value": 3.0}, {"year": 2014, "value": 3.0}, {"year": 2019, "value": 1.8}, {"year": 2019, "value": 7.6}]}, {"country": "Chile", "series": [{"year": 2006, "value": 50.91}, {"year": 2006, "value": 61.63}, {"year": 2013, "value": 44.3}, {"year": 2013, "value": 58.40000000000001}]}, {"country": "Colombia", "series": [{"year": 2006, "value": 38.06}, {"year": 2006, "value": 48.2}, {"year": 2013, "value": 15.4}, {"year": 2013, "value": 38.7}, {"year": 2019, "value": 16.6}, {"year": 2019, "value": 37.5}]}, {"country": "Congo", "series": [{"year": 2014, "value": 5.9}, {"year": 2014, "value": 17.1}, {"year": 2019, "value": 7.7}, {"year": 2019, "value": 33.6}]}, {"country": "Congo, The Democratic Republic of the", "series": [{"year": 2019, "value": 3.2}, {"year": 2019, "value": 9.2}]}, {"country": "Cook Islands", "series": [{"year": 2021, "value": 62.92}, {"year": 2021, "value": 74.67}]}, {"country": "Costa Rica", "series": [{"year": 2006, "value": 62.65000000000001}, {"year": 2006, "value": 71.32}, {"year": 2013, "value": 21.2}, {"year": 2013, "value": 49.6}, {"year": 2019, "value": 20.9}, {"year": 2019, "value": 54.0}]}, {"country": "Croatia", "series": [{"year": 2011, "value": 60.42025051605598}, {"year": 2011, "value": 98.99943266507255}, {"year": 2015, "value": 67.45962920131754}, {"year": 2019, "value": 70.00588512384495}, {"year": 2021, "value": 98.07728209659024}]}, {"country": "Cuba", "series": [{"year": 2019, "value": 20.7}, {"year": 2019, "value": 44.5}]}, {"country": "Cyprus", "series": [{"year": 2001, "value": 86.75684469582097}, {"year": 2003, "value": 67.61257117921863}, {"year": 2015, "value": 73.75824404650177}, {"year": 2019, "value": 76.91920305072213}, {"year": 2021, "value": 91.79172042187001}, {"year": 2023, "value": 71.0}]}, {"country": "Czechia", "series": [{"year": 2001, "value": 97.27002462992432}, {"year": 2007, "value": 58.56876710581152}, {"year": 2011, "value": 71.79266035773877}, {"year": 2011, "value": 98.25078991282771}, {"year": 2015, "value": 78.41877323983356}, {"year": 2016, "value": 97.03947432902504}, {"year": 2019, "value": 78.42740731232398}, {"year": 2021, "value": 96.01133325812364}, {"year": 2023, "value": 78.0}]}, {"country": "Côte d'Ivoire", "series": [{"year": 2014, "value": 3.1}, {"year": 2014, "value": 22.4}, {"year": 2019, "value": 2.6}, {"year": 2019, "value": 22.0}]}, {"country": "Dominican Republic", "series": [{"year": 2006, "value": 7.09}, {"year": 2006, "value": 10.58}, {"year": 2013, "value": 1.5}, {"year": 2013, "value": 8.0}, {"year": 2019, "value": 2.1}, {"year": 2019, "value": 16.4}]}, {"country": "Ecuador", "series": [{"year": 2006, "value": 25.75}, {"year": 2006, "value": 22.36}, {"year": 2013, "value": 14.1}, {"year": 2013, "value": 23.7}, {"year": 2019, "value": 22.9}, {"year": 2019, "value": 26.1}]}, {"country": "Egypt", "series": [{"year": 2021, "value": 44.5680390728667}]}, {"country": "El Salvador", "series": [{"year": 2006, "value": 27.25876862863164}, {"year": 2006, "value": 33.53078428420894}, {"year": 2019, "value": 7.6}, {"year": 2019, "value": 29.4}]}, {"country": "Eswatini", "series": [{"year": 2006, "value": 18.6}, {"year": 2006, "value": 72.1}, {"year": 2013, "value": 37.4}, {"year": 2013, "value": 84.30000000000001}]}, {"country": "Fiji", "series": [{"year": 2021, "value": 66.43}, {"year": 2021, "value": 59.55}]}, {"country": "Finland", "series": [{"year": 2011, "value": 84.66515783794938}, {"year": 2011, "value": 99.20121275044414}, {"year": 2015, "value": 82.19812604067342}, {"year": 2016, "value": 98.2899335233376}, {"year": 2019, "value": 78.04992681951627}, {"year": 2021, "value": 96.48309543767408}, {"year": 2023, "value": 76.0}]}, {"country": "France", "series": [{"year": 2001, "value": 95.36404208408614}, {"year": 2006, "value": 95.9074176747116}, {"year": 2011, "value": 95.26911634286192}, {"year": 2015, "value": 58.06874691239746}, {"year": 2016, "value": 93.71542314788208}, {"year": 2019, "value": 56.65545511620743}, {"year": 2021, "value": 93.86260747026321}, {"year": 2023, "value": 56.0}]}, {"country": "Gabon", "series": [{"year": 2019, "value": 22.9}, {"year": 2019, "value": 76.3}]}, {"country": "Georgia", "series": [{"year": 2006, "value": 82.02211171294243}, {"year": 2007, "value": 35.22814184875577}, {"year": 2011, "value": 41.2560406874593}, {"year": 2011, "value": 86.48549232357352}, {"year": 2015, "value": 47.26422672877472}, {"year": 2016, "value": 86.4763738517683}, {"year": 2019, "value": 55.8179093196503}, {"year": 2021, "value": 87.15887397234371}, {"year": 2023, "value": 63.0}]}, {"country": "Germany", "series": [{"year": 2001, "value": 97.03418969748952}, {"year": 2006, "value": 97.40808776382393}, {"year": 2007, "value": 78.48816167487335}, {"year": 2011, "value": 80.72361220539398}, {"year": 2011, "value": 97.61059431401881}, {"year": 2015, "value": 76.73477912788002}, {"year": 2016, "value": 94.50744628672335}, {"year": 2019, "value": 74.64572872396388}, {"year": 2021, "value": 93.5873729906259}, {"year": 2023, "value": 75.0}]}, {"country": "Greece", "series": [{"year": 2001, "value": 94.50704494019024}]}, {"country": "Guatemala", "series": [{"year": 2006, "value": 21.48}, {"year": 2006, "value": 20.72}, {"year": 2013, "value": 8.7}, {"year": 2013, "value": 19.4}, {"year": 2019, "value": 6.7}, {"year": 2019, "value": 15.9}]}, {"country": "Guinea", "series": [{"year": 2019, "value": 6.8}, {"year": 2019, "value": 22.2}]}, {"country": "Honduras", "series": [{"year": 2013, "value": 6.7}, {"year": 2013, "value": 15.8}, {"year": 2019, "value": 11.2}, {"year": 2019, "value": 16.2}]}, {"country": "Hong Kong", "series": [{"year": 2001, "value": 96.62418592586148}, {"year": 2003, "value": 93.57886205076282}, {"year": 2006, "value": 99.14615425783394}, {"year": 2007, "value": 96.8204509211296}, {"year": 2011, "value": 96.16563201826666}, {"year": 2011, "value": 99.18507727453897}, {"year": 2015, "value": 97.79838696157375}, {"year": 2016, "value": 98.59609578784854}, {"year": 2019, "value": 95.55636922624387}, {"year": 2021, "value": 98.27992167977827}, {"year": 2023, "value": 91.0}]}, {"country": "Hungary", "series": [{"year": 2001, "value": 97.54714385318442}, {"year": 2003, "value": 75.97319955485221}, {"year": 2006, "value": 97.43173005263694}, {"year": 2007, "value": 67.13620360937998}, {"year": 2011, "value": 70.3894203159257}, {"year": 2011, "value": 94.64100225314331}, {"year": 2015, "value": 74.91240402984005}, {"year": 2016, "value": 97.138107219883}, {"year": 2019, "value": 73.63839515824803}, {"year": 2021, "value": 94.13248955401393}, {"year": 2023, "value": 71.0}]}, {"country": "Indonesia", "series": [{"year": 2006, "value": 53.97707526119297}, {"year": 2011, "value": 66.22710233814504}, {"year": 2015, "value": 17.53670905908195}]}, {"country": "Iran, Islamic Republic of", "series": [{"year": 2001, "value": 56.19721773033086}, {"year": 2003, "value": 16.56550716223953}, {"year": 2006, "value": 59.8353118664932}, {"year": 2007, "value": 19.99404666944062}, {"year": 2011, "value": 33.21681682939265}, {"year": 2011, "value": 75.74360965714911}, {"year": 2015, "value": 32.73412274478652}, {"year": 2016, "value": 65.9896398626954}, {"year": 2019, "value": 38.87119494603301}, {"year": 2021, "value": 58.59795246135614}, {"year": 2023, "value": 31.0}]}, {"country": "Israel", "series": [{"year": 2001, "value": 86.61473064806049}, {"year": 2006, "value": 85.4865438104763}, {"year": 2011, "value": 93.1645025128393}, {"year": 2016, "value": 91.02270514875654}, {"year": 2021, "value": 87.9578925414396}]}, {"country": "Italy", "series": [{"year": 2001, "value": 96.55671977314218}, {"year": 2003, "value": 64.64685612231551}, {"year": 2006, "value": 98.19327515785237}, {"year": 2007, "value": 67.272510482609}, {"year": 2011, "value": 68.7333808322442}, {"year": 2011, "value": 97.66477291461973}, {"year": 2015, "value": 68.6788491366287}, {"year": 2016, "value": 97.86079645605442}, {"year": 2019, "value": 72.96109964470728}, {"year": 2021, "value": 97.18265728499931}, {"year": 2023, "value": 69.0}]}, {"country": "Jordan", "series": [{"year": 2021, "value": 46.63631455652169}, {"year": 2023, "value": 32.0}]}, {"country": "Kazakhstan", "series": [{"year": 2007, "value": 81.08917897102386}, {"year": 2011, "value": 61.76095750796917}, {"year": 2015, "value": 79.67441289175513}, {"year": 2016, "value": 98.09228533270016}, {"year": 2019, "value": 70.81777598469205}, {"year": 2021, "value": 90.69796499974373}, {"year": 2023, "value": 56.0}]}, {"country": "Kenya", "series": [{"year": 2019, "value": 79.7}, {"year": 2021, "value": 74.1}, {"year": 2021, "value": 46.7}, {"year": 2023, "value": 36.9}, {"year": 2023, "value": 25.5}]}, {"country": "Kiribati", "series": [{"year": 2021, "value": 53.12}, {"year": 2021, "value": 13.75}]}, {"country": "Korea, Republic of", "series": [{"year": 2011, "value": 96.6250624829496}, {"year": 2015, "value": 96.85165718485432}, {"year": 2019, "value": 95.18190003885059}, {"year": 2023, "value": 93.0}]}, {"country": "Kuwait", "series": [{"year": 2001, "value": 50.5903365559178}, {"year": 2006, "value": 28.16161981811872}, {"year": 2007, "value": 4.898847913506488}, {"year": 2011, "value": 9.029641657123726}, {"year": 2011, "value": 58.37115458404001}, {"year": 2015, "value": 11.73821157256235}, {"year": 2019, "value": 21.46561763075422}, {"year": 2023, "value": 22.0}]}, {"country": "Lao People's Democratic Republic", "series": [{"year": 2019, "value": 7.9}, {"year": 2019, "value": 2.0}]}, {"country": "Latvia", "series": [{"year": 2001, "value": 98.54786821831846}, {"year": 2003, "value": 80.84263157715341}, {"year": 2006, "value": 98.213781833993}, {"year": 2007, "value": 80.6736069345277}, {"year": 2016, "value": 99.1967171423755}, {"year": 2019, "value": 84.50321484900918}, {"year": 2021, "value": 94.28789822283323}, {"year": 2023, "value": 78.0}]}, {"country": "Lesotho", "series": [{"year": 2006, "value": 5.3}, {"year": 2006, "value": 22.0}, {"year": 2013, "value": 9.5}, {"year": 2013, "value": 48.5}, {"year": 2023, "value": 19.7}, {"year": 2023, "value": 10.8}]}, {"country": "Lithuania", "series": [{"year": 2001, "value": 98.01030486296199}, {"year": 2003, "value": 78.93037732090772}, {"year": 2006, "value": 98.70484292061991}, {"year": 2007, "value": 77.32813942479001}, {"year": 2011, "value": 79.0795469028904}, {"year": 2011, "value": 96.53329207700745}, {"year": 2015, "value": 80.65363326421055}, {"year": 2016, "value": 97.26507802500565}, {"year": 2019, "value": 81.42223093161361}, {"year": 2021, "value": 97.11047574143343}, {"year": 2023, "value": 87.0}]}, {"country": "Luxembourg", "series": [{"year": 2006, "value": 98.77214904123916}]}, {"country": "Macao", "series": [{"year": 2016, "value": 97.59758639617135}, {"year": 2021, "value": 95.91800112732223}]}, {"country": "Madagascar", "series": [{"year": 2015, "value": 4.7}, {"year": 2015, "value": 4.2}, {"year": 2019, "value": 6.3}, {"year": 2019, "value": 6.3}]}, {"country": "Malawi", "series": [{"year": 2006, "value": 1.7}, {"year": 2006, "value": 6.799999999999999}, {"year": 2013, "value": 4.1}, {"year": 2013, "value": 15.3}]}, {"country": "Malaysia", "series": [{"year": 2019, "value": 64.0}, {"year": 2019, "value": 58.0}]}, {"country": "Malta", "series": [{"year": 2011, "value": 63.12836334990752}, {"year": 2011, "value": 78.20120131271553}, {"year": 2016, "value": 73.1658133117453}, {"year": 2019, "value": 69.07995403657425}, {"year": 2021, "value": 90.24300110125775}]}, {"country": "Marshall Islands", "series": [{"year": 2021, "value": 38.13}, {"year": 2021, "value": 39.66}]}, {"country": "Mauritius", "series": [{"year": 2006, "value": 55.3}, {"year": 2006, "value": 66.80000000000001}, {"year": 2013, "value": 59.0}, {"year": 2013, "value": 75.39999999999999}]}, {"country": "Mexico", "series": [{"year": 2006, "value": 58.7}, {"year": 2006, "value": 54.14}, {"year": 2013, "value": 44.7}, {"year": 2013, "value": 42.6}, {"year": 2019, "value": 38.0}, {"year": 2019, "value": 41.7}]}, {"country": "Micronesia, Federated States of", "series": [{"year": 2021, "value": 44.55}, {"year": 2021, "value": 39.19}]}, {"country": "Moldova, Republic of", "series": [{"year": 2001, "value": 88.49658511418708}, {"year": 2003, "value": 65.75610958057291}, {"year": 2006, "value": 91.26234084943484}]}, {"country": "Mongolia", "series": [{"year": 2007, "value": 33.9374652314216}]}, {"country": "Montenegro", "series": [{"year": 2019, "value": 42.99140995226284}, {"year": 2021, "value": 86.9081390821574}, {"year": 2023, "value": 53.0}]}, {"country": "Morocco", "series": [{"year": 2001, "value": 33.36832402535107}, {"year": 2003, "value": 8.129262334424066}, {"year": 2006, "value": 25.74281430973187}, {"year": 2007, "value": 8.557553431262598}, {"year": 2011, "value": 9.597165369110375}, {"year": 2011, "value": 21.01225605771843}, {"year": 2015, "value": 15.68734872180166}, {"year": 2016, "value": 33.12012573533697}, {"year": 2019, "value": 18.46390147425312}, {"year": 2021, "value": 40.58303121084387}, {"year": 2023, "value": 22.0}]}, {"country": "Mozambique", "series": [{"year": 2006, "value": 5.0}, {"year": 2006, "value": 31.6}, {"year": 2013, "value": 15.2}, {"year": 2013, "value": 36.3}]}, {"country": "Myanmar", "series": [{"year": 2019, "value": 12.0}, {"year": 2019, "value": 11.0}]}, {"country": "Namibia", "series": [{"year": 2006, "value": 6.199999999999999}, {"year": 2006, "value": 35.7}, {"year": 2013, "value": 17.4}, {"year": 2013, "value": 61.2}]}, {"country": "Netherlands", "series": [{"year": 2001, "value": 99.2273959963544}, {"year": 2003, "value": 88.71705372094875}, {"year": 2006, "value": 99.44050795278181}, {"year": 2007, "value": 83.78019955827551}, {"year": 2011, "value": 88.42680291167748}, {"year": 2011, "value": 99.5501695558643}, {"year": 2015, "value": 82.98219759201675}, {"year": 2016, "value": 98.69015716532473}, {"year": 2019, "value": 84.10747994238922}, {"year": 2021, "value": 96.44555200692807}, {"year": 2023, "value": 83.0}]}, {"country": "New Zealand", "series": [{"year": 2001, "value": 89.9839770961372}, {"year": 2003, "value": 60.99409230420817}, {"year": 2006, "value": 92.0728836966224}, {"year": 2007, "value": 60.52023400676571}, {"year": 2011, "value": 58.03128003552253}, {"year": 2011, "value": 91.69385774556144}, {"year": 2015, "value": 58.64665871163061}, {"year": 2016, "value": 89.97345134702579}, {"year": 2019, "value": 55.89093535729589}, {"year": 2021, "value": 89.87754941986856}, {"year": 2023, "value": 57.0}]}, {"country": "Nicaragua", "series": [{"year": 2006, "value": 21.17}, {"year": 2006, "value": 26.32}, {"year": 2013, "value": 2.9}, {"year": 2013, "value": 14.6}, {"year": 2019, "value": 3.1}, {"year": 2019, "value": 13.0}]}, {"country": "Niger", "series": [{"year": 2014, "value": 1.4}, {"year": 2014, "value": 2.1}, {"year": 2019, "value": 7.9}, {"year": 2019, "value": 14.4}]}, {"country": "Niue", "series": [{"year": 2021, "value": 81.95}, {"year": 2021, "value": 80.97}]}, {"country": "North Macedonia", "series": [{"year": 2001, "value": 66.6720265775025}, {"year": 2006, "value": 65.76236378350406}, {"year": 2019, "value": 51.53475387487079}, {"year": 2021, "value": 69.95942421058191}, {"year": 2023, "value": 51.0}]}, {"country": "Norway", "series": [{"year": 2003, "value": 43.99862443734636}, {"year": 2007, "value": 48.33251722054639}, {"year": 2011, "value": 51.35731627643724}, {"year": 2015, "value": 70.3646975100414}, {"year": 2019, "value": 64.65546421091803}, {"year": 2023, "value": 63.0}]}, {"country": "Oman", "series": [{"year": 2011, "value": 20.28378529421658}, {"year": 2011, "value": 47.4215942103129}, {"year": 2015, "value": 32.11640169934955}, {"year": 2016, "value": 59.06261937534895}, {"year": 2019, "value": 33.09714048354954}, {"year": 2021, "value": 62.20408569608966}, {"year": 2023, "value": 29.0}]}, {"country": "Pakistan", "series": [{"year": 2019, "value": 7.508698900938044}]}, {"country": "Palau", "series": [{"year": 2021, "value": 91.73}, {"year": 2021, "value": 93.54}]}, {"country": "Panama", "series": [{"year": 2006, "value": 19.97}, {"year": 2006, "value": 30.32}, {"year": 2013, "value": 4.3}, {"year": 2013, "value": 21.2}, {"year": 2019, "value": 3.3}, {"year": 2019, "value": 17.5}]}, {"country": "Papua New Guinea", "series": [{"year": 2021, "value": 55.35}, {"year": 2021, "value": 48.41}]}, {"country": "Paraguay", "series": [{"year": 2006, "value": 28.65}, {"year": 2006, "value": 25.83}, {"year": 2013, "value": 5.899999999999999}, {"year": 2013, "value": 15.8}, {"year": 2019, "value": 5.600000000000001}, {"year": 2019, "value": 18.8}]}, {"country": "Peru", "series": [{"year": 2006, "value": 38.19}, {"year": 2006, "value": 32.03}, {"year": 2013, "value": 22.7}, {"year": 2013, "value": 31.3}, {"year": 2019, "value": 38.9}, {"year": 2019, "value": 49.0}]}, {"country": "Philippines", "series": [{"year": 2019, "value": 17.0}, {"year": 2019, "value": 10.0}]}, {"country": "Poland", "series": [{"year": 2006, "value": 93.03615072538253}, {"year": 2011, "value": 55.6451242379906}, {"year": 2011, "value": 94.58391202952724}, {"year": 2015, "value": 79.82845644994197}, {"year": 2016, "value": 98.00745777220997}, {"year": 2019, "value": 73.21523171540558}, {"year": 2021, "value": 97.2101671001687}, {"year": 2023, "value": 83.0}]}, {"country": "Portugal", "series": [{"year": 2011, "value": 80.46899309196702}, {"year": 2011, "value": 97.59369978918814}, {"year": 2015, "value": 81.76297375652892}, {"year": 2016, "value": 97.00729164290519}, {"year": 2019, "value": 73.79873784999882}, {"year": 2021, "value": 94.17757598880745}, {"year": 2023, "value": 70.0}]}, {"country": "Qatar", "series": [{"year": 2006, "value": 32.79136858283453}, {"year": 2007, "value": 2.040486661869456}, {"year": 2011, "value": 28.85225498814151}, {"year": 2011, "value": 59.66959601519422}, {"year": 2015, "value": 36.38834193307271}, {"year": 2016, "value": 66.1801344388404}, {"year": 2019, "value": 39.82293798362372}, {"year": 2021, "value": 80.39262086887139}, {"year": 2023, "value": 46.0}]}, {"country": "Romania", "series": [{"year": 2001, "value": 88.39765958154301}, {"year": 2006, "value": 83.94750015528315}, {"year": 2011, "value": 57.02512746729093}, {"year": 2011, "value": 85.92941738256502}, {"year": 2023, "value": 78.0}]}, {"country": "Russian Federation", "series": [{"year": 2001, "value": 96.19926007963633}, {"year": 2003, "value": 76.48347409636362}, {"year": 2006, "value": 98.43929853180374}, {"year": 2007, "value": 80.52884058327452}, {"year": 2011, "value": 81.82249231636442}, {"year": 2011, "value": 99.04935451637036}, {"year": 2015, "value": 88.94080214696402}, {"year": 2016, "value": 99.10515590722129}, {"year": 2019, "value": 90.89230507977214}, {"year": 2021, "value": 98.36208752509847}]}, {"country": "Saudi Arabia", "series": [{"year": 2011, "value": 24.39449133418811}, {"year": 2011, "value": 64.9864483020085}, {"year": 2015, "value": 16.21136686470314}, {"year": 2016, "value": 63.33069325769354}, {"year": 2019, "value": 23.10940347529687}, {"year": 2021, "value": 71.07143611741878}, {"year": 2023, "value": 29.0}]}, {"country": "Senegal", "series": [{"year": 2014, "value": 29.1}, {"year": 2014, "value": 34.8}, {"year": 2019, "value": 27.2}, {"year": 2019, "value": 41.1}]}, {"country": "Serbia", "series": [{"year": 2011, "value": 69.72543769761864}, {"year": 2015, "value": 71.6454261266816}, {"year": 2019, "value": 67.94842643524777}, {"year": 2021, "value": 92.80258660131291}, {"year": 2023, "value": 74.0}]}, {"country": "Seychelles", "series": [{"year": 2006, "value": 31.3}, {"year": 2006, "value": 67.8}, {"year": 2013, "value": 52.4}, {"year": 2013, "value": 79.9}]}, {"country": "Singapore", "series": [{"year": 2001, "value": 90.20895992988424}, {"year": 2003, "value": 91.2044291674606}, {"year": 2006, "value": 96.65490372225723}, {"year": 2007, "value": 91.75430927821225}, {"year": 2011, "value": 93.87353164518699}, {"year": 2011, "value": 96.79117009841309}, {"year": 2015, "value": 93.3919353576759}, {"year": 2016, "value": 97.25273026536729}, {"year": 2019, "value": 95.50691161431973}, {"year": 2021, "value": 96.6597646761494}, {"year": 2023, "value": 93.0}]}, {"country": "Slovakia", "series": [{"year": 2001, "value": 93.93098801158027}, {"year": 2006, "value": 94.36112004011123}, {"year": 2007, "value": 63.16604723454578}, {"year": 2011, "value": 68.79612381483655}, {"year": 2011, "value": 95.75281031811048}, {"year": 2015, "value": 65.03987613486183}, {"year": 2016, "value": 93.44577796307192}, {"year": 2019, "value": 71.2003617257711}, {"year": 2021, "value": 93.652180273406}, {"year": 2023, "value": 73.0}]}, {"country": "Slovenia", "series": [{"year": 2001, "value": 91.14447374081577}, {"year": 2003, "value": 54.66023559543139}, {"year": 2006, "value": 94.43295946397366}, {"year": 2007, "value": 66.63961858973128}, {"year": 2011, "value": 72.04480433166616}, {"year": 2011, "value": 95.47442888516073}, {"year": 2015, "value": 75.48252237258751}, {"year": 2016, "value": 96.31910214231311}, {"year": 2021, "value": 94.37637994262188}, {"year": 2023, "value": 71.0}]}, {"country": "Solomon Islands", "series": [{"year": 2021, "value": 86.35}, {"year": 2021, "value": 52.78}]}, {"country": "South Africa", "series": [{"year": 2006, "value": 15.5}, {"year": 2006, "value": 37.0}, {"year": 2013, "value": 29.7}, {"year": 2013, "value": 57.2}]}, {"country": "Spain", "series": [{"year": 2006, "value": 93.53760684562171}, {"year": 2011, "value": 56.22464435192363}, {"year": 2011, "value": 93.87191571360151}, {"year": 2015, "value": 67.43360028842592}, {"year": 2016, "value": 96.56865783091027}, {"year": 2019, "value": 65.36399780840866}, {"year": 2021, "value": 95.23061120746739}, {"year": 2023, "value": 62.0}]}, {"country": "Sweden", "series": [{"year": 2001, "value": 98.45307726069565}, {"year": 2006, "value": 98.18682401069073}, {"year": 2007, "value": 67.58782441950913}, {"year": 2011, "value": 68.51664016683863}, {"year": 2011, "value": 97.59201405948917}, {"year": 2015, "value": 74.90515585526164}, {"year": 2016, "value": 98.07444871007226}, {"year": 2019, "value": 74.3792630385952}, {"year": 2021, "value": 95.27646000191935}, {"year": 2023, "value": 77.0}]}, {"country": "Tanzania, United Republic of", "series": [{"year": 2006, "value": 31.5}, {"year": 2006, "value": 77.9}, {"year": 2013, "value": 8.1}, {"year": 2013, "value": 60.60000000000001}]}, {"country": "Thailand", "series": [{"year": 2011, "value": 43.4057224122588}]}, {"country": "Togo", "series": [{"year": 2014, "value": 19.7}, {"year": 2014, "value": 15.8}, {"year": 2019, "value": 15.9}, {"year": 2019, "value": 19.4}]}, {"country": "Tokelau", "series": [{"year": 2021, "value": 66.65}, {"year": 2021, "value": 71.79}]}, {"country": "Tonga", "series": [{"year": 2021, "value": 75.26}, {"year": 2021, "value": 20.1}]}, {"country": "Trinidad and Tobago", "series": [{"year": 2006, "value": 64.38439695686996}, {"year": 2011, "value": 77.99835043855141}, {"year": 2016, "value": 80.33565287631939}]}, {"country": "Tunisia", "series": [{"year": 2003, "value": 8.938461795912694}, {"year": 2007, "value": 8.802058900692469}, {"year": 2011, "value": 11.28824370435682}]}, {"country": "Turkey", "series": [{"year": 2001, "value": 72.31309972938993}, {"year": 2011, "value": 51.02145755179773}, {"year": 2015, "value": 57.09063054998747}, {"year": 2019, "value": 70.42283735090412}, {"year": 2021, "value": 85.89120777207677}, {"year": 2023, "value": 79.0}]}, {"country": "Tuvalu", "series": [{"year": 2021, "value": 54.67}, {"year": 2021, "value": 32.09}]}, {"country": "Uganda", "series": [{"year": 2006, "value": 7.1}, {"year": 2006, "value": 30.5}, {"year": 2013, "value": 20.7}, {"year": 2013, "value": 50.49999999999999}]}, {"country": "Ukraine", "series": [{"year": 2007, "value": 50.1730573192561}]}, {"country": "United Arab Emirates", "series": [{"year": 2011, "value": 35.00931477096746}, {"year": 2011, "value": 63.98231244024914}, {"year": 2015, "value": 42.47980492894305}, {"year": 2016, "value": 67.5712269651356}, {"year": 2019, "value": 53.41598241707761}, {"year": 2021, "value": 75.02674897652544}, {"year": 2023, "value": 60.0}]}, {"country": "United Kingdom", "series": [{"year": 2001, "value": 94.48416702410529}, {"year": 2003, "value": 74.58884008393989}, {"year": 2006, "value": 93.2499200785223}, {"year": 2007, "value": 78.87907050821867}, {"year": 2011, "value": 77.63047987723004}, {"year": 2011, "value": 95.3660569859835}, {"year": 2015, "value": 80.01890178215358}, {"year": 2016, "value": 96.8334516814167}, {"year": 2019, "value": 82.76576510125166}, {"year": 2021, "value": 97.03106261895587}, {"year": 2023, "value": 80.0}]}, {"country": "United States", "series": [{"year": 2001, "value": 93.98629944492104}, {"year": 2003, "value": 71.65905898519287}, {"year": 2006, "value": 95.96241111773433}, {"year": 2007, "value": 76.74421976287195}, {"year": 2011, "value": 80.97027825341776}, {"year": 2011, "value": 97.51735888988527}, {"year": 2015, "value": 78.6484698747518}, {"year": 2016, "value": 96.09407991802209}, {"year": 2019, "value": 76.57600521499123}, {"year": 2021, "value": 94.50663865506843}, {"year": 2023, "value": 68.0}]}, {"country": "Uruguay", "series": [{"year": 2006, "value": 72.72}, {"year": 2006, "value": 59.13}, {"year": 2013, "value": 37.5}, {"year": 2013, "value": 43.5}, {"year": 2019, "value": 38.0}, {"year": 2019, "value": 43.8}]}, {"country": "Uzbekistan", "series": [{"year": 2021, "value": 69.83822466820487}, {"year": 2023, "value": 35.0}]}, {"country": "Viet Nam", "series": [{"year": 2019, "value": 91.0}, {"year": 2019, "value": 82.0}]}, {"country": "Yemen", "series": [{"year": 2003, "value": 4.818329231741424}, {"year": 2007, "value": 1.289279477367937}, {"year": 2011, "value": 2.32530792728553}]}, {"country": "Zambia", "series": [{"year": 2016, "value": 3.5}, {"year": 2016, "value": 1.8}, {"year": 2021, "value": 2.1}, {"year": 2021, "value": 2.3}, {"year": 2023, "value": 16.0}, {"year": 2023, "value": 9.7}]}, {"country": "Zimbabwe", "series": [{"year": 2006, "value": 20.1}, {"year": 2006, "value": 42.2}, {"year": 2013, "value": 23.4}, {"year": 2013, "value": 45.4}]}];

// Extract all years & values for scaling
const allYears = Array.from(new Set(data.flatMap(d => d.series.map(p => p.year)))).sort((a,b)=>a-b);
const minYear = Math.min(...allYears);
const maxYear = Math.max(...allYears);
const allValues = data.flatMap(d => d.series.map(p => p.value));
const minVal = Math.min(...allValues);
const maxVal = Math.max(...allValues);

const svg = d3.select("#chart");
const margin = {top: 40, right: 28, bottom: 40, left: 48};
let width = svg.node().clientWidth;
let height = svg.node().clientHeight;
const innerW = width - margin.left - margin.right;
const innerH = height - margin.top - margin.bottom;

const g = svg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);

const x = d3.scaleLinear().domain([minYear, maxYear]).range([0, innerW]);
const y = d3.scaleLinear().domain([Math.floor(minVal/5)*5, Math.ceil(maxVal/5)*5]).nice().range([innerH, 0]);

const xAxis = d3.axisBottom(x).tickFormat(d3.format("d"));
const yAxis = d3.axisLeft(y);

g.append("g").attr("class", "axis").attr("transform", `translate(0, ${innerH})`).call(xAxis);
g.append("g").attr("class", "axis").call(yAxis);

const color = d3.scaleOrdinal(d3.schemeTableau10);
const line = d3.line()
  .x(d => x(d.year))
  .y(d => y(d.value));

// Draw lines
const linesG = g.append("g").attr("class", "lines");

const countryG = linesG.selectAll(".country")
  .data(data)
  .join("g")
  .attr("class", "country");

countryG.append("path")
  .attr("class", "line")
  .attr("d", d => line(d.series))
  .attr("stroke", (d,i) => color(d.country));

// Add last-point labels (small)
countryG.append("text")
  .attr("x", d => x(d.series[d.series.length-1].year) + 4)
  .attr("y", d => y(d.series[d.series.length-1].value))
  .attr("dy", "0.32em")
  .attr("font-size", 10)
  .attr("fill", "#333")
  .text(d => d.country);

// Hover interactions
const bigLabel = d3.select("#bigLabel");

function bringToFront(selection) { selection.each(function(){ this.parentNode.appendChild(this); }); }

countryG
  .on("mouseenter", function(event, d){
    // Muted others
    d3.selectAll(".line").classed("muted", true);
    const current = d3.select(this).select(".line");
    current.classed("muted", false).attr("stroke-width", 3.5);
    bringToFront(d3.select(this));

    bigLabel.text(d.country).style("opacity", 1);
  })
  .on("mouseleave", function(event, d){
    d3.selectAll(".line").classed("muted", false).attr("stroke-width", 1.5);
    bigLabel.style("opacity", 0);
  });

// Simple search filter
const input = document.getElementById("search");
input.addEventListener("input", (e) => {
  const q = e.target.value.trim().toLowerCase();
  countryG.style("display", d => d.country.toLowerCase().includes(q) ? null : "none");
});

// Show all / Clear buttons
document.getElementById("showAll").addEventListener("click", () => {
  d3.selectAll(".line").classed("muted", false).attr("stroke-width", 1.5);
  bigLabel.style("opacity", 0);
});
document.getElementById("clearAll").addEventListener("click", () => {
  d3.selectAll(".line").classed("muted", true).attr("stroke-width", 1.5);
  bigLabel.style("opacity", 0);
});

// Minimal resize handling: advise manual refresh after container size changes
</script>
</body>
</html>
